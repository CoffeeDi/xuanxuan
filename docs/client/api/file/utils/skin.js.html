<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">utils/skin.js | API</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<link rel="stylesheet" href="./inject/css/0-vue.css"><link rel="stylesheet" href="./inject/css/0-app.css"><link rel="stylesheet" href="./inject/css/0-esdoc.css"><script src="./inject/script/0-custom.js"></script><meta name="description" content="&#x4F01;&#x4E1A;&#x5373;&#x65F6;&#x901A;&#x8BAF;&#x5E73;&#x53F0;"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="API"><meta property="twitter:description" content="&#x4F01;&#x4E1A;&#x5373;&#x65F6;&#x901A;&#x8BAF;&#x5E73;&#x53F0;"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/easysoft/xuanxuan.git"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/utils/color.js~Color.html">Color</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/utils/delay-action.js~DelayAction.html">DelayAction</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/utils/status.js~Status.html">Status</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/utils/status.js~StatusKeeper.html">StatusKeeper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/utils/task-queue.js~TaskQueue.html">TaskQueue</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-createDate">createDate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-createPhpTimestramp">createPhpTimestramp</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-formatDate">formatDate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-formatSpan">formatSpan</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getTimeBeforeDesc">getTimeBeforeDesc</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isSameDay">isSameDay</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isSameMonth">isSameMonth</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isSameYear">isSameYear</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isToday">isToday</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isYestoday">isYestoday</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-classes">classes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-escape">escape</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getSearchParam">getSearchParam</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isWebUrl">isWebUrl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-linkify">linkify</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-rem">rem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-strip">strip</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-cutImage">cutImage</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getImageInfo">getImageInfo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-limittimepromise">limittimepromise</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mdifileicon">mdifileicon</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-pinyin">pinyin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-plain">plain</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-matchScore">matchScore</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-formatKeyDecoration">formatKeyDecoration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getKeyDecoration">getKeyDecoration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isOnlyModifyKeys">isOnlyModifyKeys</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getCodeFromString">getCodeFromString</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-longShadow">longShadow</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-skinStyle">skinStyle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-sortList">sortList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-clearStore">clearStore</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getStoreItem">getStoreItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getStoreLength">getStoreLength</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-removeStoreItem">removeStoreItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-setStoreItem">setStoreItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-storeForEach">storeForEach</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-storeGetAll">storeGetAll</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-formatBytes">formatBytes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-formatString">formatString</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ifEmptyStringThen">ifEmptyStringThen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isEmptyString">isEmptyString</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isNotEmptyString">isNotEmptyString</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-timesequence">timesequence</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TIME_DAY">TIME_DAY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-renderer">renderer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-fileIcons">fileIcons</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-BYTE_UNITS">BYTE_UNITS</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">utils/skin.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import Color from &apos;./color&apos;;

/**
 * &#x9ED8;&#x8BA4;&#x76AE;&#x80A4;&#x9009;&#x9879;
 * @type {Object.&lt;string, any&gt;}
 * @private
 */
const DEFAULT_OPTIONS = {
    outline: false,
    pale: false,
    dark: false,
    code: &apos;random&apos;,
    textTint: true,
    backTint: true,
    textColor: &apos;&apos;,
    darkText: &apos;#fff&apos;,
    lightText: &apos;#333&apos;,
    hueSpace: 43,
    threshold: 0.43,
    darkLight: 0.4,
    paleLight: 0.92,
    saturation: 0.7,
    lightness: 0.6,
    longShadow: false,
    // name: &apos;&apos;,
};

/**
 * &#x6839;&#x636E;&#x7ED9;&#x5B9A;&#x5B57;&#x7B26;&#x4E32;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x5BF9;&#x5E94;&#x7684;&#x552F;&#x4E00;&#x7684;&#x56FA;&#x5B9A;&#x503C;
 * @param {string} str &#x8981;&#x8BA1;&#x7B97;&#x503C;&#x7684;&#x5B57;&#x7B26;&#x4E32;
 * @return {number}
 */
export const getCodeFromString = (str) =&gt; {
    if (!str) {
        return 0;
    }
    return str.split(&apos;&apos;)
        .map(char =&gt; char.charCodeAt(0))
        .reduce((current, previous) =&gt; previous + current);
};

/**
 * &#x8BA1;&#x7B97;&#x957F;&#x9634;&#x5F71;&#x6837;&#x5F0F;
 * @param {number} shadowSize &#x9634;&#x5F71;&#x5927;&#x5C0F;
 * @param {string|number|Object} color &#x9634;&#x5F71;&#x989C;&#x8272;
 * @param {boolean} [returnShadow=false] &#x662F;&#x5426;&#x8FD4;&#x56DE;&#x9634;&#x5F71;&#x503C;&#xFF0C;&#x5982;&#x679C;&#x4E3A; `false` &#x5219;&#x8FD4;&#x56DE;&#x6837;&#x5F0F;&#x5BF9;&#x8C61;
 * @param {number} [darkenAmount=8] &#x9634;&#x5F71;&#x8272;&#x5F69;&#x52A0;&#x6DF1;&#x767E;&#x5206;&#x6BD4;
 * @return {Object|string}
 * @private
 */
export const longShadow = (shadowSize, color, returnShadow = false, darkenAmount = 8) =&gt; {
    if (typeof shadowSize !== &apos;number&apos;) {
        shadowSize = 40;
    }
    const shadowColor = Color.create(color).darken(darkenAmount).css;
    const textShadowArr = [];
    for (let i = 1; i &lt;= shadowSize; ++i) {
        textShadowArr.push(`${shadowColor} ${i}px ${i}px`);
    }
    const textShadow = textShadowArr.join(&apos;,&apos;);
    return returnShadow ? textShadow : {textShadow};
};

/**
 * &#x6839;&#x636E;&#x503C;&#x6216;&#x914D;&#x7F6E;&#x5BF9;&#x8C61;&#x751F;&#x6210; CSS &#x6837;&#x5F0F;&#x5BF9;&#x8C61;
 * @param {number|Object&lt;string, any&gt;} skinCode &#x76AE;&#x80A4;&#x503C;
 * @param {Object&lt;string, any&gt;} options &#x76AE;&#x80A4;&#x914D;&#x7F6E;&#x5BF9;&#x8C61;
 * @return {Object&lt;string, any&gt;}
 */
export const skinStyle = (skinCode, options = {}) =&gt; {
    if (typeof skinCode === &apos;object&apos;) {
        options = skinCode;
    } else {
        options.code = skinCode;
    }
    options = Object.assign({}, DEFAULT_OPTIONS, options);

    let {
        outline,
        pale,
        dark,
        textTint,
        backTint,
        darkText,
        lightText,
        color,
        code,
        textColor,
        hueSpace,
        threshold,
        darkLight,
        paleLight,
        saturation,
        lightness,
        name,
        longShadow: thisLongShadow,
        ...other
    } = options;

    if (!color) {
        if (code === &apos;random&apos;) {
            code = Math.floor(Math.random() * 360);
        }
        if (typeof code === &apos;string&apos;) {
            if (!Color.isColor(code)) {
                code = getCodeFromString(code);
            }
        }
        if (typeof code === &apos;number&apos;) {
            code = {h: (code * hueSpace) % 360, s: saturation, l: lightness};
        }
        color = Color.create(code);
        if (code !== &apos;random&apos;) {
            options.color = color;
        }
    }

    let backColor = &apos;&apos;;
    let borderColor = &apos;&apos;;
    let fontColor = textColor;
    if (outline) {
        if (dark) {
            const darkColor = color.clone().setHsl({s: saturation, l: darkLight});
            borderColor = darkColor;
        } else if (pale) {
            const lightColor = color.clone().setHsl({s: saturation, l: paleLight});
            borderColor = lightColor;
        } else {
            borderColor = color;
        }
        if (!fontColor &amp;&amp; textTint) {
            fontColor = borderColor;
        }
    } else if (backTint) {
        if (dark) {
            const darkColor = color.clone().setHsl({s: saturation, l: darkLight});
            backColor = darkColor;
        } else if (pale) {
            const lightColor = color.clone().setHsl({s: saturation, l: paleLight});
            backColor = lightColor;
        } else {
            backColor = color;
        }
        if (!fontColor) {
            if (backColor.isDark(threshold)) {
                fontColor = darkText;
            } else if (textTint) {
                const darkColor = color.clone().setHsl({s: saturation, l: darkLight});
                fontColor = darkColor;
            } else {
                fontColor = lightText;
            }
        }
    } else if (dark) {
        const darkColor = color.clone().setHsl({s: saturation, l: darkLight});
        fontColor = darkColor;
    } else if (pale) {
        const lightColor = color.clone().setHsl({s: saturation, l: paleLight});
        fontColor = lightColor;
    } else {
        fontColor = color;
    }

    const style = Object.assign({}, other);
    if (backColor) style.backgroundColor = backColor.css || backColor;
    if (borderColor) style.borderColor = borderColor.css || borderColor;
    if (fontColor) style.color = fontColor.css || fontColor;
    if (thisLongShadow) {
        style.textShadow = longShadow(thisLongShadow, backColor, true);
    }
    return style;
};

/**
 * &#x6839;&#x636E;&#x503C;&#x6216;&#x914D;&#x7F6E;&#x5BF9;&#x8C61;&#x751F;&#x6210;&#x9002;&#x5408;&#x5E94;&#x7528;&#x6587;&#x672C;&#x5916;&#x89C2;&#x7684; CSS &#x6837;&#x5F0F;&#x5BF9;&#x8C61;
 * @param {number} skinCode &#x76AE;&#x80A4;&#x503C;
 * @param {Object&lt;string, any&gt;} options &#x76AE;&#x80A4;&#x914D;&#x7F6E;&#x5BF9;&#x8C61;
 * @return {Object&lt;string, any&gt;}
 */
const textSkin = (skinCode, options) =&gt; {
    return skinStyle(skinCode, Object.assign({backTint: false}, options));
};

export default {
    style: skinStyle,
    text: textSkin,
    longShadow,
};
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
